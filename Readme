驱动程序针对ubuntu18.04、ubuntu20.04版本,其他版本可以向厂家咨询。

一.pcie_v4l2_sdk目录说明
bash目录： 执行脚本
Makefile文件：对驱动及应用程序进行Build的整体Makefile文件，
	     也可以单独进入每一目录进行单独编译。
xdma_v4l2目录：PCIE板卡的驱动程序
include目录: xdma头文件
./tool/pcie_a53_rw目录：对PCIE板卡ps进行读写的应用。
./tool/pcie_reg_rw目录：对PCIE板卡寄存器进行读写的应用。
./tool/xdma_v4l2_rw目录：通过驱动提供的v4l2接口对驱动进行配置的应用。

二.使用说明
进入bash目录，执行如下脚本
1. sudo ./load_modules.sh  (加载驱动程序)
加载成功，终端显示如下：
Loading Pcie driver...
Pcie driver installed correctly.
Video devices were recognized.
DONE

同时在/dev目录会生成video0，video1,video2,video3视频设备文件。
以及控制接口设备文件
xdma0_bypass
xdma0_control
xdma0_user

其中数字0,代表第1块PCIE板卡，
其中数字1,代表第2块PCIE板卡，
以此类推。

2.sudo ./pcie_init_card0.sh （初始化PCIE板卡0，并配置摄像头）
执行成功，终端显示如下：
Reset Process!
Card Params Init Processed!
Serdes 0 Params Init Processed!
Serdes 1 Params Init Processed!
Serdes 2 Params Init Processed!
Serdes 3 Params Init Processed!
Serdes 4 Params Init Processed!
Serdes 5 Params Init Processed!
Serdes 6 Params Init Processed!
Serdes 7 Params Init Processed!
Serdes Params Init Processed!
Info: All process in pcie_init.sh passed.



如果程序不能成功运行可以到pcie_v4l2_sdk目录，重新Build来生成驱动和应用。
make clean
make

3.图像测试
图像测试方法采用guvcview开源程序
系统如果没有安装，采用如下命令安装：
sudo apt-get install guvcview

图像测试如下：
guvcview -d /dev/video0
guvcview -d /dev/video1
guvcview -d /dev/video2
guvcview -d /dev/video3
测试不同通道的摄像头，成功可以实时查看视频流

三.不同摄像头配置参数的修改。
需要修改pcie_init_card0.sh脚本以及pcie_a53_rw应用程序。
